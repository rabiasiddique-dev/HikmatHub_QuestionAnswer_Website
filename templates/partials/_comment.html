{# templates/partials/_comment.html #}
<div class="comment" id="comment-{{ comment._id|string }}">
    <div class="comment-body-container"> {# Aik container div #}
        <div class="comment-body" id="comment-body-{{ comment._id|string }}">
            {{ comment.body }}
        </div>
        {# Hidden edit form, initially hidden #}
        <form class="edit-comment-form" style="display:none;" data-comment-id="{{ comment._id|string }}">
            <textarea name="body" class="form-control form-control-sm comment-edit-input" rows="2" required minlength="3" maxlength="500">{{ comment.body }}</textarea>
            <div class="edit-form-actions mt-1">
                <button type="submit" class="btn btn-sm btn-primary submit-edit-comment-btn">Save Changes</button>
                <button type="button" class="btn btn-sm btn-outline-secondary cancel-edit-comment-btn">Cancel</button>
            </div>
        </form>
    </div>
    <div class="comment-meta">
        â€“ <a href="{{ url_for('profile', username=comment.author_username) }}">{{ comment.author_username }}</a>
        <span class="comment-timestamp" title="{{ comment.timestamp.strftime('%Y-%m-%d %H:%M:%S UTC') }}">
            {{ comment.timestamp.strftime('%b %d, %Y at %I:%M %p') }}
        </span>
        {% if comment.edited_timestamp %}
            <span class="edited-indicator" title="Edited on {{ comment.edited_timestamp.strftime('%b %d, %Y at %I:%M %p') }}">(edited)</span>
        {% endif %}

        {# Actions: Edit, Delete, (Voting can also be here or separate) #}
        <span class="comment-meta-actions ml-2">
            {% if current_user.is_authenticated and current_user.id == comment.author_id|string %}
                <a href="#" class="edit-comment-trigger small" data-comment-id="{{ comment._id|string }}">Edit</a>
                <a href="#" class="delete-comment-trigger small text-danger ml-1" data-comment-id="{{ comment._id|string }}">Delete</a>
            {% endif %}
        </span>
    </div>
    {# Optional: Comment Voting Section (agar aapne implement kiya hai) #}
    {% if comment.upvotes is defined %} {# Ensure votes data is passed if you have comment voting #}
    <div class="comment-actions mt-1">
        <div class="voting-section comment-voting-section" data-item-type="comment" data-item-id="{{ comment._id|string }}">
            <button class="vote-btn upvote-item btn-sm-vote" data-item-id="{{ comment._id|string }}" data-vote-type="upvote" data-item-type="comment" title="Helpful comment">
                <i class="fas fa-thumbs-up"></i> <span id="c-upvotes-{{ comment._id|string }}">{{ comment.upvotes|length }}</span>
            </button>
            <button class="vote-btn downvote-item btn-sm-vote" data-item-id="{{ comment._id|string }}" data-vote-type="downvote" data-item-type="comment" title="Not helpful">
                <i class="fas fa-thumbs-down"></i> <span id="c-downvotes-{{ comment._id|string }}">{{ comment.downvotes|length }}</span>
            </button>
        </div>
    </div>
    {% endif %}
</div>