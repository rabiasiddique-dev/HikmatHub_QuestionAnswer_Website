{% extends "base.html" %}

{% block title %}{{ title }} - Hikmat Hub{% endblock %}

{% block content %}
<div class="container page-container">
    <header class="page-header">
        <h1>{{ title }}</h1>
        <p class="text-muted">{{ total_results }} question{{ 's' if total_results != 1 else '' }} found.</p>
    </header>

    {% if questions %}
        <section class="questions-list">
            {% for question in questions %}
                {% include 'partials/_question_card.html' %} {# Reusing the question card #}
            {% endfor %}
        </section>

        {# Pagination (agar aapne banayi hai) #}
        {% if total_pages > 1 %}
        <nav aria-label="Page navigation" class="mt-4">
            <ul class="pagination">
                {# Previous Page Link #}
                <li class="page-item {% if page == 1 %}disabled{% endif %}">
                    <a class="page-link" href="{{ url_for('search_results', query=request.args.get('query', ''), tag=request.args.get('tag', ''), page=page-1) if page > 1 else '#' }}" aria-label="Previous">
                        <span aria-hidden="true">«</span>
                    </a>
                </li>

                {# Page Number Links - Simple version #}
                {% set start_page = [1, page-2] | max %}
                {% set end_page = [total_pages, page+2] | min %}

                {% if start_page > 1 %}
                    <li class="page-item"><a class="page-link" href="{{ url_for('search_results', query=request.args.get('query', ''), tag=request.args.get('tag', ''), page=1) }}">1</a></li>
                    {% if start_page > 2 %}
                        <li class="page-item disabled"><span class="page-link">...</span></li>
                    {% endif %}
                {% endif %}

                {% for p in range(start_page, end_page + 1) %}
                <li class="page-item {% if p == page %}active{% endif %}">
                    <a class="page-link" href="{{ url_for('search_results', query=request.args.get('query', ''), tag=request.args.get('tag', ''), page=p) }}">{{ p }}</a>
                </li>
                {% endfor %}

                {% if end_page < total_pages %}
                    {% if end_page < total_pages - 1 %}
                        <li class="page-item disabled"><span class="page-link">...</span></li>
                    {% endif %}
                    <li class="page-item"><a class="page-link" href="{{ url_for('search_results', query=request.args.get('query', ''), tag=request.args.get('tag', ''), page=total_pages) }}">{{ total_pages }}</a></li>
                {% endif %}

                {# Next Page Link #}
                <li class="page-item {% if page == total_pages %}disabled{% endif %}">
                    <a class="page-link" href="{{ url_for('search_results', query=request.args.get('query', ''), tag=request.args.get('tag', ''), page=page+1) if page < total_pages else '#' }}" aria-label="Next">
                        <span aria-hidden="true">»</span>
                    </a>
                </li>
            </ul>
        </nav>
        {% endif %}

    {% else %}
        <div class="empty-state">
            <i class="fas fa-search fa-3x text-muted mb-3"></i>
            <p>No questions found matching your criteria.</p>
            <p>Try different keywords or browse <a href="{{ url_for('index') }}">all questions</a>.</p>
        </div>
    {% endif %}
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<style>
.page-container { margin-top: 2rem; }
.page-header { margin-bottom: 2rem; border-bottom: 1px solid var(--border-color); padding-bottom: 1rem; }
.page-header h1 { font-size: 2rem; }
.empty-state .fa-search { font-size: 3rem; margin-bottom: 1rem; }
.mt-4 { margin-top: 1.5rem !important; }
</style>
{% endblock %}